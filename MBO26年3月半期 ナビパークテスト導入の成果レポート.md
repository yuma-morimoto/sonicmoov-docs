
## 要約

- テスト導入の目的
- 主な成果（定量・定性の要点）
- 課題と今後の方向性（1ページ以内）

---

## 背景と目的

### 導入前の課題

- ナビパーク案件では長期的な開発を経て機能が複雑化しており、修正や新規実装にてデグレやバグが発生するリスクが増大している。これに伴い対応時間に遅れが発生、工数も圧迫する状況が発生している
- 現状では単体・E2Eいずれのテストコードも十分に整備されておらず、品質保証を人手の確認に依存している状況
- 法人対応では大規模な機能追加や既存部分との連携が発生するため、テスト環境の整備と自動化が必要である

### テスト導入の目的

- 品質向上
- リリースリスク低減
- 開発効率改善
- 長期的な保守性向上

---

## テスト導入の概要

### 導入したテストの種類

- 単体テスト
- コンポーネントテスト
- E2Eテスト
- 手動テスト（探索的テスト等）

### テスト対象範囲

- 対象範囲
    - E2Eテストはしっかりとテストしたい部分のみ書く
- 非対象範囲と理由
- 粒度
    - ユーザーにとって役立つ程度
    - ユーザーに使い方を説明する程度
    - [https://speakerdeck.com/tsuemura/e2etesutonosinariotochou-xiang-hua-noli-du-nohua?slide=8](https://speakerdeck.com/tsuemura/e2etesutonosinariotochou-xiang-hua-noli-du-nohua?slide=8)

### 使用ツール・環境

- Vitest
- Playwright
- Github Actions

---

## 導入手順

- 現在進行中のプロジェクトにE2Eテストとコンポーネントテストを導入する
- Playwright実行環境をプロジェクトに導入する
- POMの雛形を作成
- fixtureを作成
- アカウントログイン処理を実装
- シナリオベースのテストなので、describeをシナリオとし、testを手順とした
    - testには項目の表示やAPIリクエストボディなど細かい確認も含めた

## 工夫したところ

- MSWモックをファクトリパターンで実装することでテスト時はレスポンスを上書きするだけにした

---

## テスト導入による成果

### 6.1 定量的成果

- 不具合件数の変化
- 本番障害の減少率
- リリース後の修正工数
- テスト実行時間／自動化率

### 6.2 定性的成果

- 開発者の安心感・心理的安全性
- コード品質・設計改善
- 仕様理解の向上
- チーム内コミュニケーション改善

---

## 導入時に直面した課題

- バックエンドに接続してテストする方法も検討しましたが、デバッグが難しかったり、結果が不安定（Flaky）になるため運用が難しいと判断しました。
- 初期コスト（工数・学習）
- テストが書きにくい設計
- テストのメンテナンス負荷
- テスト実行時間の増加
- 並列処理によるCognito側のエラー
    - 同じアカウントで同時ログインするとエラーになる

---

## まとめ

- テスト導入の総括
- 組織・プロダクトへの価値
- 今後に向けたメッセージ
- 運用しながらテストを改善していく